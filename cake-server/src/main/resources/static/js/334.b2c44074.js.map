{"version":3,"file":"js/334.b2c44074.js","mappings":"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","sources":["webpack://cake_shop/./src/views/CakeView.vue","webpack://cake_shop/./src/views/CakeView.vue?5095"],"sourcesContent":["<template>\r\n  <div class=\"cakes-page\">\r\n    <!-- 筛选条件区域 - 金色奢华风格 -->\r\n    <div class=\"filter-bar\">\r\n      <div class=\"filter-container\">\r\n        <!-- 口味筛选 -->\r\n        <div class=\"filter-group\">\r\n          <span class=\"filter-label\">口味：</span>\r\n          <div class=\"filter-options\">\r\n            <span \r\n              v-for=\"flavor in flavors\" \r\n              :key=\"flavor.value\"\r\n              class=\"filter-option\"\r\n              :class=\"{ active: flavorFilter === flavor.value }\"\r\n              @click=\"handleFlavorClick(flavor.value)\"\r\n            >\r\n              {{ flavor.label }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 人数筛选 -->\r\n        <div class=\"filter-group\">\r\n          <span class=\"filter-label\">规格：</span>\r\n          <div class=\"filter-options\">\r\n            <span \r\n              v-for=\"number in numbers\" \r\n              :key=\"number.value\"\r\n              class=\"filter-option\"\r\n              :class=\"{ active: numberFilter === number.value }\"\r\n              @click=\"handleNumberClick(number.value)\"\r\n            >\r\n              {{ number.label }}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 新增按钮 - 与筛选条件同行 -->\r\n      <el-button \r\n        class=\"add-button\"\r\n        type=\"primary\" \r\n        @click=\"showAddDialog\"\r\n        icon=\"el-icon-plus\"\r\n      >\r\n        新增蛋糕\r\n      </el-button>\r\n    </div>\r\n\r\n    <!-- 加载状态 -->\r\n    <div v-if=\"loading\" class=\"loading-container\">\r\n      <el-skeleton :rows=\"6\" animated />\r\n    </div>\r\n\r\n    <!-- 蛋糕列表 -->\r\n    <div v-else class=\"cake-list\">\r\n      <el-row :gutter=\"20\">\r\n        <el-col \r\n          v-for=\"cake in cakes\" \r\n          :key=\"cake.id\"\r\n          :xs=\"24\" :sm=\"12\" :md=\"8\" :lg=\"6\"\r\n        >\r\n          <cake-card :cake=\"cake\" @click=\"goToDetail(cake.id)\">\r\n            <template #actions>\r\n              <el-button \r\n                size=\"mini\" \r\n                type=\"danger\"\r\n                class=\"delete-btn\"\r\n                @click.stop=\"handleDelete(cake.id)\"\r\n              >\r\n              删除\r\n            </el-button>\r\n              <el-button \r\n                size=\"mini\" \r\n                class=\"edit-btn\"\r\n                @click.stop=\"handleEdit(cake)\"\r\n              >\r\n                编辑\r\n              </el-button>\r\n            </template>\r\n          </cake-card>\r\n        </el-col>\r\n      </el-row>\r\n      \r\n      <!-- 空状态 -->\r\n      <el-empty v-if=\"cakes.length === 0\" description=\"暂无蛋糕商品\" />\r\n    </div>\r\n\r\n    <!-- 对话框 -->\r\n    <el-dialog \r\n      :title=\"isEdit ? '编辑蛋糕' : '新增蛋糕'\"\r\n      v-model=\"addDialogVisible\"\r\n      width=\"50%\"\r\n      @closed=\"handleDialogClosed\"\r\n      class=\"golden-dialog\"\r\n    >\r\n      <cake-form\r\n        ref=\"cakeForm\"\r\n        :key=\"isEdit ? 'edit-form' : 'add-form'\"\r\n        :is-edit=\"isEdit\"\r\n        :initial-data=\"currentCakeData\"\r\n        @submit=\"handleAddCake\"\r\n        @cancel=\"addDialogVisible = false\"\r\n      />\r\n    </el-dialog>\r\n\r\n    <!-- 分页组件 -->\r\n    <!-- <div class=\"pagination-container\" v-if=\"cakes.length > 0\">\r\n    <div class=\"pagination-wrapper\">\r\n      <el-pagination\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"pagination.pageNum\"\r\n        :page-size=\"pagination.pageSize\"\r\n        layout=\"prev, pager, next\"\r\n        :total=\"pagination.total\"\r\n        prev-text=\"上一页\"\r\n        next-text=\"下一页\"\r\n      />\r\n      <div class=\"total-pages\">\r\n        共 {{ Math.ceil(pagination.total / pagination.pageSize) }} 页\r\n      </div>\r\n    </div>\r\n    </div> -->\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getCakes, addCake, updateCake,getCakeById,deleteCake,saveSpecs,getTastes} from '@/api/cake.js'\r\nimport CakeCard from '@/components/CakeCard.vue'\r\nimport CakeForm from '@/components/CakeForm.vue'\r\n\r\nexport default {\r\n  name: 'CakeSelection',\r\n  components: { CakeCard, CakeForm },\r\n  data() {\r\n    return {\r\n      isEdit: true,\r\n      currentCakeId: null,\r\n      categoryId: null,\r\n      loading: false,\r\n      cakes: [],\r\n      tastes: [], // 存储口味列表\r\n      flavorFilter: null,\r\n      numberFilter: null,\r\n      addDialogVisible: false,\r\n      currentCakeData: null, // 新增，用于存储当前编辑的蛋糕数据\r\n\r\n      pagination: {\r\n        pageNum: 1,    // 当前页码\r\n        pageSize: 8,   // 每页条数\r\n        total: 0        // 总条数\r\n      },\r\n   \r\n      numbers: [\r\n        { value: null, label: '全部' },\r\n        { value:'1-2人', label: '1-2人' },\r\n        { value: '3-4人', label: '3-4人' },\r\n        { value:'5-6人', label: '5-6人' },\r\n        { value: '7-8人', label: '7-8人' }\r\n      ]\r\n    }\r\n  },\r\n  created() {\r\n     this.fetchTastes() // 获取口味列表\r\n    this.fetchCakes()\r\n  },\r\n  methods: {\r\n    async fetchTastes() {\r\n      try {\r\n        const res = await getTastes()\r\n        this.tastes = res.data\r\n        // 构建筛选器选项\r\n        this.flavors = [\r\n          { value: null, label: '全部' },\r\n          ...this.tastes.map(taste => ({\r\n            value: taste.id,\r\n            label: taste.flavor\r\n          }))\r\n        ]\r\n      } catch (error) {\r\n        console.error('获取口味列表失败', error)\r\n      }\r\n    },\r\n    async fetchCakes() {\r\n      this.loading = true\r\n      try {\r\n        await getTastes()\r\n        const params = {\r\n          tasteId: this.flavorFilter,\r\n          number: this.numberFilter,\r\n          pageNum: this.pagination.pageNum,  // 添加分页参数\r\n          pageSize: this.pagination.pageSize // 添加分页参数\r\n        }\r\n        const res = await getCakes(params)\r\n        this.cakes = res.data.records; // 根据后端返回结构调整\r\n        console.log(\"甄选蛋糕：\",this.cakes)\r\n        console.log('records长度:', res.data.records?.length)\r\n        this.pagination.total = res.data.total || 0; // 设置总条数\r\n\r\n      } catch (error) {\r\n        this.$message.error('获取蛋糕列表失败')\r\n        console.error(error)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    // 添加删除方法\r\n   async handleDelete(id) {\r\n    try {\r\n      await this.$confirm('确定要删除这个蛋糕吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      })\r\n      \r\n      await deleteCake(id)\r\n      this.$message.success('删除成功')\r\n       // 如果删除的是当前页的最后一条数据，且不是第一页，则返回上一页\r\n    if (this.cakes.length === 1 && this.pagination.pageNum > 1) {\r\n       this.pagination.pageNum -= 1\r\n    }\r\n      this.fetchCakes()\r\n    } catch (error) {\r\n      if (error !== 'cancel') {\r\n        this.$message.error('删除失败')\r\n        console.error(error)\r\n      }\r\n    }\r\n  },\r\n\r\n\r\n    // 处理口味点击\r\n    handleFlavorClick(value) {\r\n      this.flavorFilter = this.flavorFilter === value ? null : value;\r\n      this.fetchCakes();\r\n    },\r\n    \r\n    // 处理人数点击\r\n    handleNumberClick(value) {\r\n      this.numberFilter = this.numberFilter === value ? null : value;\r\n      this.fetchCakes();\r\n    },\r\n      // 每页条数变化\r\n    handleSizeChange(val) {\r\n      this.pagination.pageSize = val;\r\n      this.fetchCakes();\r\n    },\r\n    // 当前页码变化\r\n    handleCurrentChange(val) {\r\n      this.pagination.pageNum = val;\r\n      this.fetchCakes();\r\n    },\r\n    \r\n  \r\n     handleDialogOpened() {\r\n    if (this.isEdit && this.$refs.cakeForm) {\r\n      this.$refs.cakeForm.setFormData(this.currentCakeData);\r\n    }\r\n    },\r\n    goToDetail(id) {\r\n      this.$router.push(`/cake/${id}`)\r\n    },\r\n    showAddDialog() {\r\n      this.isEdit = false\r\n      this.currentCakeId = null\r\n      this.currentCakeData = null; // 清空编辑数据\r\n      this.addDialogVisible = true\r\n\r\n   \r\n    },\r\n\r\n    handleDialogClosed() {\r\n    // 关闭时重置状态\r\n    this.isEdit = true;\r\n    this.currentCakeId = null;\r\n    this.currentCakeData = null;\r\n  },\r\n       \r\n    async handleEdit(cake) {\r\n      this.loading = true\r\n      console.log(\"蛋糕id:\",cake.id)\r\n      try {\r\n        // 获取蛋糕详情\r\n        this.isEdit = true;\r\n        console.log(\"蛋糕：\",cake)\r\n        const res = await getCakeById(cake.id)\r\n        console.log(\"获取到的蛋糕详情:\", res.data);\r\n        this.currentCakeData = { ...res.data };\r\n        this.currentCakeId = cake.id\r\n        this.addDialogVisible = true\r\n        // 4. 确保表单已渲染后再设置数据\r\n        this.$nextTick(() => {\r\n          if (this.$refs.cakeForm) {\r\n            this.$refs.cakeForm.setFormData(this.currentCakeData);\r\n          }\r\n        });\r\n      } catch (error) {\r\n        this.$message.error('获取蛋糕详情失败')\r\n        console.error(error)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n  async handleAddCake(formData) {\r\n    try {\r\n      \r\n\r\n      // 分离商品基本信息和规格信息\r\n      const { specs, ...baseData } = formData;\r\n      \r\n      // 确保包含分类ID\r\n      const categoryId = 1;\r\n      if (categoryId) {\r\n        formData.categoryId = categoryId;\r\n      }\r\n      console.log(\"分类id:\",formData.categoryId)\r\n      \r\n      if (this.isEdit) {\r\n        console.log(\"更新数据：\", { ...baseData, id: this.currentCakeId });\r\n        \r\n        // 1. 更新商品基本信息\r\n        await updateCake({\r\n          ...baseData,\r\n          id: this.currentCakeId\r\n        });\r\n        \r\n        // // 2. 保存规格信息\r\n        await saveSpecs(this.currentCakeId, specs);\r\n        \r\n        this.$message.success('蛋糕更新成功');\r\n      } else {\r\n        \r\n        \r\n        // 1. 新增商品基本信息和添加口味\r\n        await addCake(formData);\r\n       this.$message.success('蛋糕添加成功');\r\n      }\r\n      \r\n      this.addDialogVisible = false;\r\n      this.fetchCakes();\r\n    } catch (error) {\r\n      this.$message.error(this.isEdit ? '更新失败' : '添加失败');\r\n      console.error(error);\r\n    }\r\n  }\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped>\r\n/* 整体页面样式 */\r\n.cakes-page {\r\n  padding: 20px;\r\n  background: linear-gradient(to bottom, #FFFDF5, #FFF9E6);\r\n  min-height: 100vh;\r\n}\r\n\r\n/* 筛选栏 - 金色奢华风格 */\r\n.filter-bar {\r\n  background: #FFFDF5;\r\n  padding: 20px;\r\n  border-radius: 15px;\r\n  margin-bottom: 25px;\r\n  box-shadow: 0 5px 15px rgba(214, 187, 112, 0.1);\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border: 1px solid #e8dfc8;\r\n}\r\n\r\n.filter-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 15px;\r\n  flex-grow: 1;\r\n}\r\n\r\n.filter-group {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.filter-label {\r\n  font-size: 16px;\r\n  color: #b38b2d;\r\n  width: 70px;\r\n  font-weight: bold;\r\n  text-shadow: 0 1px 1px rgba(0,0,0,0.05);\r\n}\r\n\r\n.filter-options {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n}\r\n\r\n.filter-option {\r\n  padding: 8px 16px;\r\n  border-radius: 20px;\r\n  background: #fff;\r\n  border: 1px solid #d6bb70;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  transition: all 0.3s;\r\n  color: #8a7c5a;\r\n  box-shadow: 0 2px 5px rgba(214, 187, 112, 0.2);\r\n}\r\n\r\n.filter-option:hover {\r\n  color: #fff;\r\n  background-color: #d6bb70;\r\n  border-color: #d6bb70;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n.filter-option.active {\r\n  color: #fff;\r\n  background-color: #b38b2d;\r\n  border-color: #b38b2d;\r\n  font-weight: bold;\r\n  box-shadow: 0 4px 8px rgba(179, 139, 45, 0.3);\r\n}\r\n\r\n/* 新增按钮 - 金色风格 */\r\n.add-button {\r\n  background: linear-gradient(45deg, #d6bb70, #b38b2d);\r\n  border: none;\r\n  border-radius: 25px;\r\n  padding: 10px 25px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  color: white;\r\n  box-shadow: 0 4px 10px rgba(214, 187, 112, 0.3);\r\n  transition: all 0.3s;\r\n  margin-left: 20px;\r\n}\r\n\r\n.add-button:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 6px 15px rgba(214, 187, 112, 0.4);\r\n  background: linear-gradient(45deg, #b38b2d, #d6bb70);\r\n}\r\n\r\n/* 蛋糕列表 */\r\n.cake-list {\r\n  margin-top: 20px;\r\n}\r\n\r\n/* 编辑按钮 */\r\n.edit-btn {\r\n  background: #f5ecd8;\r\n  color: #b38b2d;\r\n  border: none;\r\n  border-radius: 15px;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.edit-btn:hover {\r\n  background: #d6bb70;\r\n  color: white;\r\n}\r\n\r\n/* 加载状态 */\r\n.loading-container {\r\n  padding: 30px;\r\n  background: #fff;\r\n  border-radius: 15px;\r\n  box-shadow: 0 5px 15px rgba(214, 187, 112, 0.1);\r\n}\r\n\r\n/* 分页样式 - 金色风格 */\r\n.pagination-container {\r\n  margin-top: 30px;\r\n  text-align: center;\r\n}\r\n.pagination-wrapper {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  background: #f5ecd8;\r\n  border-radius: 20px;\r\n  padding: 5px 10px;\r\n}\r\n\r\n.total-pages {\r\n  margin-left: 15px;\r\n  color: #b38b2d;\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n}\r\n\r\n\r\n.pagination-container ::v-deep .el-pagination {\r\n  display: inline-flex;\r\n  align-items: center;\r\n}\r\n\r\n.pagination-container ::v-deep .btn-prev,\r\n.pagination-container ::v-deep .btn-next {\r\n  padding: 0 15px;\r\n  border-radius: 15px;\r\n  background: #f5ecd8;\r\n  color: #b38b2d;\r\n  border: none;\r\n  margin: 0 5px;\r\n}\r\n\r\n.pagination-container ::v-deep .el-pager li {\r\n  border-radius: 15px;\r\n  background: #f5ecd8;\r\n  margin: 0 5px;\r\n  color: #b38b2d;\r\n}\r\n\r\n.pagination-container ::v-deep .el-pager li.active {\r\n  background: linear-gradient(45deg, #d6bb70, #b38b2d);\r\n  color: white;\r\n  font-weight: bold;\r\n}\r\n\r\n/* 对话框样式 */\r\n.golden-dialog ::v-deep .el-dialog {\r\n  border-radius: 15px;\r\n  background: #FFFDF5;\r\n}\r\n\r\n.golden-dialog ::v-deep .el-dialog__header {\r\n  background: linear-gradient(to right, #d6bb70, #b38b2d);\r\n  border-radius: 15px 15px 0 0;\r\n  padding: 15px 20px;\r\n}\r\n\r\n.golden-dialog ::v-deep .el-dialog__title {\r\n  color: white;\r\n  font-weight: bold;\r\n}\r\n\r\n/* 响应式调整 */\r\n@media (max-width: 768px) {\r\n  .filter-bar {\r\n    flex-direction: column;\r\n    gap: 15px;\r\n  }\r\n  \r\n  .add-button {\r\n    margin-left: 0;\r\n    margin-top: 10px;\r\n    width: 100%;\r\n  }\r\n  \r\n  .filter-group {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n  }\r\n  \r\n  .filter-label {\r\n    margin-bottom: 8px;\r\n  }\r\n}\r\n/* 添加删除按钮样式 */\r\n.delete-btn {\r\n  background: #fdf6f0;\r\n  color: #e74c3c;\r\n  border: none;\r\n  border-radius: 15px;\r\n  transition: all 0.3s;\r\n  margin-right: 8px;\r\n}\r\n\r\n.delete-btn:hover {\r\n  background: #fadbd8;\r\n  color: #c0392b;\r\n}\r\n\r\n/* 调整按钮间距 */\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 5px;\r\n}\r\n</style>","import { render } from \"./CakeView.vue?vue&type=template&id=f0dac9ba&scoped=true\"\nimport script from \"./CakeView.vue?vue&type=script&lang=js\"\nexport * from \"./CakeView.vue?vue&type=script&lang=js\"\n\nimport \"./CakeView.vue?vue&type=style&index=0&id=f0dac9ba&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f0dac9ba\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_Fragment","_renderList","_ctx","flavors","flavor","key","value","_normalizeClass","active","$data","flavorFilter","onClick","$event","$options","handleFlavorClick","label","_hoisted_6","_hoisted_7","_hoisted_8","numbers","number","numberFilter","handleNumberClick","_hoisted_9","_createVNode","_component_el_button","type","showAddDialog","icon","_cache","loading","_hoisted_10","_component_el_skeleton","rows","animated","_hoisted_11","_component_el_row","gutter","cakes","cake","_createBlock","_component_el_col","id","xs","sm","md","lg","_component_cake_card","goToDetail","actions","_withCtx","size","_withModifiers","handleDelete","handleEdit","length","_component_el_empty","description","_component_el_dialog","title","isEdit","addDialogVisible","width","onClosed","handleDialogClosed","_component_cake_form","ref","currentCakeData","onSubmit","handleAddCake","onCancel","name","components","CakeCard","CakeForm","data","currentCakeId","categoryId","tastes","pagination","pageNum","pageSize","total","created","this","fetchTastes","fetchCakes","methods","res","getTastes","map","taste","error","console","params","tasteId","getCakes","records","log","$message","$confirm","confirmButtonText","cancelButtonText","deleteCake","success","handleSizeChange","val","handleCurrentChange","handleDialogOpened","$refs","cakeForm","setFormData","$router","push","getCakeById","$nextTick","formData","specs","baseData","updateCake","saveSpecs","addCake","__exports__","render"],"sourceRoot":""}